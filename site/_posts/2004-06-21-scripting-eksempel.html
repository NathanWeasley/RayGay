---
layout: post
title:  Scripting - Eksempel
date:   2004-06-21
categories: raygay update
---

<p>Mit sceneformat er nu et hjemmelavet sprog og min sceneparser er nu en fortolker. Der er understøttelse for <tt>if-else</tt>, <tt>while</tt>, <tt>do-while</tt>, <tt>repeat</tt>, variable, float-matematik og vektor-matematik.</p>

<h2>Eksempel</h2>
<p>Nedenstående billede er genereret ud fra følgende scene:</p>
<p>
<div class="vim"><pre>$x = -1200
repeat (30) {
  $z = -1200
  repeat (30) {
    $topy = random(200,300)
    object $box translate &lt;$x,$topy,$z&gt;
    if (random(1) &lt; 0.3) {
      sphere {
        material {
          diffuse &lt;random(1),random(1),random(1)&gt;
          kd 0.4
          specular &lt; 1.0,1.0,1.0 &gt;
          ks 0.6
          specpow 30
        }
        30 &lt; 0,0,0 &gt;
      } translate &lt; $x,$topy+35,$z &gt;
    }
    $z = 100 + $z
  }
  $x = 100 + $x
}</pre>
</div>
</p>
<p>Koden placerer en bunke kasser som alle er forskudt til en tilfældig højde. Ovenpå 30% af kasser placeres en kugle som har en tilfældig farve. Billedet bliver forskelligt hver gang man udregner det.</p>
<p><a href="{{site.url}}/assets/tracer51big.png"><img src="{{site.url}}/assets/tracer51.png"></a></p>

